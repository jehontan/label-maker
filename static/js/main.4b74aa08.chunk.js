(this["webpackJsonplabel-maker"]=this["webpackJsonplabel-maker"]||[]).push([[0],{138:function(e,t,a){e.exports=a(184)},143:function(e,t,a){},144:function(e,t,a){},170:function(e,t){},172:function(e,t){},182:function(e){e.exports=JSON.parse('{"printers":{"B_TD2130N":{"type":"B_TD2130N","name":"Brother TD2130N","labelWidth":252,"labelHeight":32,"marginTop":0,"marginLeft":34.8,"dpmm":12},"Z_ZD510-HC":{"type":"Z_ZD510-HC","name":"Zebra ZD510-HC","labelWidth":279.4,"labelHeight":25.4,"marginTop":0,"marginLeft":35,"dpmm":12}}}')},184:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(10),i=a.n(l),o=(a(143),a(26)),s=a(27),c=a(11),d=a(30),h=a(28),p=a(3),m=a(72),u=a(42),g=(a(144),a(4)),f=a(236),b=a(240),v=a(237),E=a(230),C=a(46),w=a(228),y=a(229),x=a(119),O=a.n(x),k=a(120),j=a.n(k),T=a(244),S=a(223),N=a(235),A=a(118),P=a.n(A),D=a(121),W=a.n(D),I=a(186),R=a(238),B=a(239),L=a(122),G=a.n(L),M=a(123),U=a.n(M),H=a(220),_=a(124),F=a(241),Z=a(224),J=a(51),V=a(15),K=a(242),Y=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleNameChange=n.handleNameChange.bind(Object(c.a)(n)),n.handleNricChange=n.handleNricChange.bind(Object(c.a)(n)),n.handleBedNoChange=n.handleBedNoChange.bind(Object(c.a)(n)),n.handleCatStatusChange=n.handleCatStatusChange.bind(Object(c.a)(n)),n.handleDateChange=n.handleDateChange.bind(Object(c.a)(n)),n.handleAllergiesChange=n.handleAllergiesChange.bind(Object(c.a)(n)),n}return Object(s.a)(a,[{key:"handleNameChange",value:function(e){this.props.onChange({name:e.target.value})}},{key:"handleNricChange",value:function(e){this.props.onChange({nric:e.target.value})}},{key:"handleBedNoChange",value:function(e){this.props.onChange({bed_no:e.target.value})}},{key:"handleCatStatusChange",value:function(e){this.props.onChange({cat_status:e.target.value})}},{key:"handleDateChange",value:function(e){this.props.onChange({admission_date:e})}},{key:"handleAllergiesChange",value:function(e){this.props.onChange({allergies:e.target.value})}},{key:"render",value:function(){return r.a.createElement(H.a,{container:!0,spacing:3},r.a.createElement(H.a,{item:!0,xs:12,md:6},r.a.createElement(F.a,{id:"input-name",label:"Name",variant:"standard",fullWidth:!0,onChange:this.handleNameChange})),r.a.createElement(H.a,{item:!0,xs:12,md:6},r.a.createElement(F.a,{id:"input-nric",label:"NRIC/FIN",variant:"standard",fullWidth:!0,onChange:this.handleNricChange})),r.a.createElement(H.a,{item:!0,xs:12,md:4},r.a.createElement(F.a,{select:!0,defaultValue:"1",id:"input-cat-status",label:"Cat. Status",variant:"standard",align:"left",fullWidth:!0,onChange:this.handleCatStatusChange},r.a.createElement(Z.a,{key:"1",value:"1"},"Cat 1"),r.a.createElement(Z.a,{key:"2A",value:"2A"},"Cat 2A"),r.a.createElement(Z.a,{key:"2A+",value:"2A+"},"Cat 2A+"),r.a.createElement(Z.a,{key:"2B",value:"2B"},"Cat 2B"),r.a.createElement(Z.a,{key:"3",value:"3"},"Cat 3"))),r.a.createElement(H.a,{item:!0,xs:12,md:4},r.a.createElement(F.a,{id:"input-bed-no",label:"Bed Number",variant:"standard",fullWidth:!0,onChange:this.handleBedNoChange})),r.a.createElement(H.a,{item:!0,xs:12,md:4},r.a.createElement(V.a,{utils:J.a},r.a.createElement(K.a,{fullWidth:!0,disableToolbar:!0,variant:"inline",format:"dd MMM yyyy",id:"date-picker-inline",label:"Admission Date",value:this.props.admission_date,onChange:this.handleDateChange,KeyboardButtonProps:{"aria-label":"change date"}}))),r.a.createElement(H.a,{item:!0,xs:12},r.a.createElement(F.a,{id:"input-allergies",label:"Drug Allergies",variant:"standard",fullWidth:!0,onChange:this.handleAllergiesChange})))}}]),a}(r.a.Component),$=a(70),q=a.n($),z=new J.a,Q=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){if(this.props.generate){var e=this.props.canvasRef.current.getContext("2d"),t=this.props,a=this.props.printer.dpmm*this.props.printer.marginLeft,n=this.props.printer.dpmm*(this.props.printer.labelHeight-2*this.props.printer.marginTop);e.save(),e.translate(a,0);var l=q()(0,"H");l.addData(t.nric),l.make(),e.translate(50,(n-250)/2),l.renderTo2dContext(e,10),e.restore(),e.save(),e.translate(a,0),e.font="bold 60px Arial";var i="CAT "+t.cat_status,o=e.measureText(i);e.translate(404,n/2),e.rotate(-Math.PI/2),e.translate(-o.width/2,0),e.fillText(i,0,0),e.restore(),e.save(),e.translate(a+50+250+60+44+50,(n-200)/2),e.font="bold 30px Arial",e.fillText("Name:",0,0),e.fillText("NRIC/FIN:",0,50),e.fillText("Bed:",0,100),e.fillText("Admission:",0,150),e.fillText("Drug Allergy:",0,200),e.font="bold 30px Arial",e.fillText(t.name,200,0),e.fillText(t.nric,200,50),e.fillText(t.bed_no,200,100),e.fillText(z.format(t.admission_date,"dd MMM yyyy"),200,150),e.fillText(t.allergies,200,200),e.restore()}return r.a.createElement("div",{style:{overflow:"scroll",width:"100%",float:"left",position:"relative"}},r.a.createElement("div",{style:{width:this.props.printer.dpmm*this.props.printer.labelWidth,height:this.props.printer.dpmm*this.props.printer.labelHeight,display:"flex",justifyContent:"left",alignItems:"center",border:"solid 1px black"}},r.a.createElement("canvas",{ref:this.props.canvasRef,id:"labelCanvas",width:this.props.printer.dpmm*(this.props.printer.labelWidth-this.props.printer.marginLeft),height:this.props.printer.dpmm*(this.props.printer.labelHeight-2*this.props.printer.marginTop)})))}}]),a}(r.a.Component),X=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleFormChange=n.handleFormChange.bind(Object(c.a)(n)),n.handleGenerate=n.handleGenerate.bind(Object(c.a)(n)),n.handlePrint=n.handlePrint.bind(Object(c.a)(n)),n.canvasRef=r.a.createRef(),n.state={generate:!1,name:"",nric:"",bed_no:"",cat_status:"1",admission_date:Date.now(),allergies:""},n}return Object(s.a)(a,[{key:"handleFormChange",value:function(e){e.generate=!1,this.setState(e)}},{key:"handleGenerate",value:function(){var e=this.canvasRef.current;e.getContext("2d").clearRect(0,0,e.width,e.height),this.setState({generate:!0}),this.render()}},{key:"handlePrint",value:function(){var e=this.canvasRef.current.toDataURL("image/png");console.log(e);var t=window.open("","Print","height=500, width=500");t.document.write('<img src="'+e+'"/>'),t.onload=function(){return t.print()},t.document.close(),this.props.onPrint()}},{key:"render",value:function(){var e=this.props.classes;return this.props.print&&this.handlePrint(),r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,{className:e.paper},r.a.createElement(H.a,{container:!0,spacing:3},r.a.createElement(H.a,{item:!0,xs:12},r.a.createElement(C.a,{variant:"h5",align:"left"},"Personal Particulars")),r.a.createElement(H.a,{item:!0,xs:12},r.a.createElement(Y,Object.assign({classes:this.props,onChange:this.handleFormChange},this.state))),r.a.createElement(H.a,{item:!0,xs:12},r.a.createElement(w.a,{variant:"contained",color:"primary",onClick:this.handleGenerate},"Generate")))),r.a.createElement(_.a,{className:e.paper},r.a.createElement(H.a,{container:!0,spacing:3},r.a.createElement(H.a,{item:!0,xs:12},r.a.createElement(C.a,{variant:"h5",align:"left"},"Preview")),r.a.createElement(H.a,{item:!0,xs:12},r.a.createElement(Q,Object.assign({canvasRef:this.canvasRef},this.state,this.props))))))}}]),a}(r.a.Component),ee=Object(g.a)((function(e){return{root:{flexGrow:1},title:{flexGrow:1},container:{padding:e.spacing(2)},paper:{margin:e.spacing(2),padding:"20px",textAlign:"center",color:e.palette.text.secondary}}}),{withTheme:!0})(X),te=a(114),ae=a(34),ne=new J.a,re=a(148);function le(e,t,a){e.width=a.printer.dpmm*(a.printer.labelWidth-a.printer.marginLeft),e.height=a.printer.dpmm*(a.printer.labelHeight-2*a.printer.marginTop),e.style["page-break-after"]="always";var n=e.getContext("2d"),r=a.printer.dpmm*a.printer.marginLeft,l=a.printer.dpmm*(a.printer.labelHeight-2*a.printer.marginTop);n.save(),n.translate(r,0);var i=q()(0,"H");i.addData(t["NRIC/FIN"]),i.make(),n.translate(50,(l-250)/2),i.renderTo2dContext(n,10),n.restore(),n.save(),n.translate(r,0),n.font="bold 60px Arial";var o=t["CAT STATUS"],s=n.measureText(o);n.translate(404,l/2),n.rotate(-Math.PI/2),n.translate(-s.width/2,0),n.fillText(o,0,0),n.restore(),n.save(),n.translate(r+50+250+60+44+50,(l-200)/2),n.font="bold 30px Arial",n.fillText("Name:",0,0),n.fillText("NRIC/FIN:",0,50),n.fillText("Bed:",0,100),n.fillText("Admission:",0,150),n.fillText("Drug Allergy:",0,200),n.font="bold 30px Arial",n.fillText(t.NAME,200,0),n.fillText(t["NRIC/FIN"],200,50),n.fillText(t.BED,200,100),n.fillText(ne.format(new Date(t["ADMISSION DATE"]),"dd MMM yyyy"),200,150),n.fillText(t["DRUG ALLERGY"],200,200),n.restore()}var ie=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleGenerate=n.handleGenerate.bind(Object(c.a)(n)),n.handlePrint=n.handlePrint.bind(Object(c.a)(n)),n.handleUpload=n.handleUpload.bind(Object(c.a)(n)),n.previewRef=r.a.createRef(),n.state={generate:!1,data:"",records:{},labels:[]},n}return Object(s.a)(a,[{key:"handleGenerate",value:function(){var e=this,t=[],a=this.previewRef.current;a.innerHTML="";var n=re(this.state.data,{columns:!0});n.on("readable",(function(){for(var r;r=n.read();){var l=document.createElement("canvas");le(l,r,Object(ae.a)({},e.props)),t.push(l.toDataURL()),a.appendChild(l)}})),n.on("end",(function(){e.setState({labels:t}),e.setState({generate:!0})}))}},{key:"handlePrint",value:function(){var e,t,a=window.open("","Print","height=500, width=500"),n=Object(te.a)(this.state.labels);try{for(n.s();!(t=n.n()).done;)e=t.value,a.document.write('<img src="'+e+'" style="page-break-after: always"/>')}catch(r){n.e(r)}finally{n.f()}a.onload=function(){return a.print()},a.document.close(),this.props.onPrint()}},{key:"handleUpload",value:function(e){var t=this;this.setState({generate:!1});var a=new FileReader;a.onload=function(e){t.setState({data:e.target.result})},a.readAsText(e.target.files[0])}},{key:"render",value:function(){var e=this.props.classes;return this.props.print&&this.handlePrint(),r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,{className:e.paper},r.a.createElement(H.a,{container:!0,spacing:3},r.a.createElement(H.a,{item:!0,xs:12},r.a.createElement(C.a,{variant:"h5",align:"left"},"Upload CSV")),r.a.createElement(H.a,{item:!0,xs:12},r.a.createElement(w.a,{variant:"contained",component:"label"},"Upload File",r.a.createElement("input",{type:"file",style:{display:"none"},onChange:this.handleUpload}))),r.a.createElement(H.a,{item:!0,xs:12},r.a.createElement(w.a,{variant:"contained",color:"primary",onClick:this.handleGenerate},"Generate")))),r.a.createElement(_.a,{ref:this.previewRef,className:e.paper,style:{height:"50vh",overflow:"scroll"}}))}}]),a}(r.a.Component),oe=Object(g.a)((function(e){return{root:{flexGrow:1},title:{flexGrow:1},container:{padding:e.spacing(2)},paper:{margin:e.spacing(2),padding:"20px",textAlign:"center",color:e.palette.text.secondary}}}),{withTheme:!0})(ie),se=a(73),ce=a(232),de=a(21),he=a(225),pe=a(226),me=a(234),ue=a(233),ge=a(227),fe=a(115),be=a.n(fe),ve=a(116),Ee=a.n(ve),Ce=a(231);function we(e){var t=Object(de.a)(),a=Object(ce.a)(t.breakpoints.down("xs")),n=Object.entries(e.printers).map((function(e){return r.a.createElement(Z.a,{key:e[1].type,value:e[1].type},e[1].name)})),l=r.a.useState(!1),i=Object(se.a)(l,2),o=i[0],s=i[1],c=r.a.useState(e.printer),d=Object(se.a)(c,2),h=d[0],p=d[1],m=r.a.useState("Unknown"!==e.printer.type),u=Object(se.a)(m,2),g=u[0],f=u[1],b=function(){p(e.printer),s(!1),e.onClose()};return r.a.createElement(he.a,Object.assign({fullScreen:a,onBackdropClick:b},e),r.a.createElement(ue.a,null,"Settings"),r.a.createElement(pe.a,null,r.a.createElement(me.a,null,"Select print settings to match printer at your station."),r.a.createElement(H.a,{container:!0,spacing:3},r.a.createElement(H.a,{item:!0,xs:12},r.a.createElement(F.a,{select:!0,fullWidth:!0,label:"Printer Type",value:h.type,onChange:function(t){var a=t.target.value;if("Unknown"!==a)p(e.printers[a]),f(!0);else{var n=Object(ae.a)({},h);n.type=a,p(n),f(!1)}s(!0)}},r.a.createElement(Z.a,{key:"Unknown",value:"Unknown"},"Unknown (Manual Config.)"),n)),r.a.createElement(H.a,{item:!0,xs:12},r.a.createElement(N.a,null)),r.a.createElement(H.a,{item:!0,xs:12},r.a.createElement(F.a,{disabled:g,fullWidth:!0,type:"number",label:"Resolution",helperText:"300 dpi = 12 dpmm",InputProps:{endAdornment:r.a.createElement(Ce.a,{position:"end"},"dpmm")},value:h.dpmm,onChange:function(e){if(e.target.value>=0){var t=Object(ae.a)({},h);t.dpmm=e.target.value,p(t),s(!0)}}})),r.a.createElement(H.a,{item:!0,xs:4}),r.a.createElement(H.a,{item:!0,xs:4},r.a.createElement(F.a,{disabled:g,fullWidth:!0,type:"number",label:"Top Margin",helperText:"Also the bottom margin",InputProps:{endAdornment:r.a.createElement(Ce.a,{position:"end"},"mm")},value:h.marginTop,onChange:function(e){if(e.target.value>=0){var t=Object(ae.a)({},h);t.marginTop=e.target.value,p(t),s(!0)}}})),r.a.createElement(H.a,{item:!0,xs:4}),r.a.createElement(H.a,{item:!0,xs:4},r.a.createElement(F.a,{disabled:g,fullWidth:!0,type:"number",label:"Left Margin",InputProps:{endAdornment:r.a.createElement(Ce.a,{position:"end"},"mm")},value:h.marginLeft,onChange:function(e){if(e.target.value>=0){var t=Object(ae.a)({},h);t.marginLeft=e.target.value,p(t),s(!0)}}})),r.a.createElement(H.a,{item:!0,xs:4},r.a.createElement("div",{align:"center",style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",border:"solid 1px black"}},r.a.createElement(C.a,null,"Label"))),r.a.createElement(H.a,{item:!0,xs:4},r.a.createElement(F.a,{disabled:g,fullWidth:!0,type:"number",label:"Label Height",InputProps:{endAdornment:r.a.createElement(Ce.a,{position:"end"},"mm")},value:h.labelHeight,onChange:function(e){if(e.target.value>=0){var t=Object(ae.a)({},h);t.labelHeight=e.target.value,p(t),s(!0)}}})),r.a.createElement(H.a,{item:!0,xs:4}),r.a.createElement(H.a,{item:!0,xs:4},r.a.createElement(F.a,{disabled:g,fullWidth:!0,type:"number",label:"Label Width",InputProps:{endAdornment:r.a.createElement(Ce.a,{position:"end"},"mm")},value:h.labelWidth,onChange:function(e){if(e.target.value>=0){var t=Object(ae.a)({},h);t.labelWidth=e.target.value,p(t),s(!0)}}})),r.a.createElement(H.a,{item:!0,xs:4}))),r.a.createElement(ge.a,null,r.a.createElement(w.a,{startIcon:r.a.createElement(be.a,null),onClick:function(){e.onSave(Object(ae.a)({},h)),s(!1),e.onClose()},disabled:!o},"Save"),r.a.createElement(w.a,{startIcon:r.a.createElement(Ee.a,null),onClick:b},"Cancel")))}var ye=a(182),xe=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;Object(o.a)(this,a),(n=t.call(this,e)).handlePrint=n.handlePrint.bind(Object(c.a)(n)),n.handlePrintDone=n.handlePrintDone.bind(Object(c.a)(n)),n.handleSettingsToggle=n.handleSettingsToggle.bind(Object(c.a)(n)),n.handleSettingsChanged=n.handleSettingsChanged.bind(Object(c.a)(n)),n.handleDrawerOpen=n.handleDrawerOpen.bind(Object(c.a)(n)),n.handleDrawerClose=n.handleDrawerClose.bind(Object(c.a)(n));var r=window.localStorage.getItem("printer");return n.state={printer:r?JSON.parse(r):ye.printers.B_TD2130N,settingsOpen:!1,drawerOpen:!1},n}return Object(s.a)(a,[{key:"handleSettingsToggle",value:function(){this.setState({settingsOpen:!this.state.settingsOpen})}},{key:"handleSettingsChanged",value:function(e){window.localStorage.setItem("printer",JSON.stringify(e)),this.setState({printer:e}),console.log(e)}},{key:"handleDrawerOpen",value:function(){this.setState({drawerOpen:!0})}},{key:"handleDrawerClose",value:function(){this.setState({drawerOpen:!1})}},{key:"handlePrint",value:function(){this.setState({print:!0})}},{key:"handlePrintDone",value:function(){this.setState({print:!1})}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(m.a,null,r.a.createElement("div",{className:e.root},r.a.createElement(f.a,null),r.a.createElement(v.a,{position:"static"},r.a.createElement(E.a,null,r.a.createElement(y.a,{color:"inherit","aria-label":"open drawer",onClick:this.handleDrawerOpen,edge:"start",className:Object(p.a)(e.menuButton,this.state.drawerOpen&&e.hide)},r.a.createElement(P.a,null)),r.a.createElement(C.a,{variant:"h6",className:e.title},"Label Maker"),r.a.createElement(w.a,{color:"inherit",startIcon:r.a.createElement(O.a,null),onClick:this.handlePrint},"Print"),r.a.createElement(y.a,{color:"inherit",onClick:this.handleSettingsToggle},r.a.createElement(j.a,null)))),r.a.createElement(T.a,{className:e.drawer,anchor:"left",open:this.state.drawerOpen,onClose:this.handleDrawerClose,classes:{paper:e.drawerPaper}},r.a.createElement("div",{className:e.drawerHeader},r.a.createElement(y.a,{onClick:this.handleDrawerClose},r.a.createElement(W.a,null))),r.a.createElement(N.a,null),r.a.createElement(S.a,null,r.a.createElement(I.a,{button:!0,component:m.b,to:"/"},r.a.createElement(R.a,null,r.a.createElement(G.a,null)),r.a.createElement(B.a,{primary:"Single"})),r.a.createElement(I.a,{button:!0,component:m.b,to:"/bulk"},r.a.createElement(R.a,null,r.a.createElement(U.a,null)),r.a.createElement(B.a,{primary:"Bulk"})))),r.a.createElement(b.a,{className:e.container,maxWidth:"md"},r.a.createElement(u.c,null,r.a.createElement(u.a,{path:"/bulk"},r.a.createElement(oe,Object.assign({onPrint:this.handlePrintDone},this.state))),r.a.createElement(u.a,{path:"/"},r.a.createElement(ee,Object.assign({onPrint:this.handlePrintDone},this.state))))),r.a.createElement(we,{printer:this.state.printer,printers:ye.printers,open:this.state.settingsOpen,onClose:this.handleSettingsToggle,onSave:this.handleSettingsChanged})))}}]),a}(r.a.Component),Oe=Object(g.a)((function(e){return{root:{flexGrow:1},title:{flexGrow:1},container:{padding:e.spacing(2)},paper:{margin:e.spacing(2),padding:"20px",textAlign:"center",color:e.palette.text.secondary},drawer:{width:240,flexShrink:0},drawerPaper:{width:240}}}),{withTheme:!0})(xe),ke=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function je(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(r.a.createElement(Oe,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");ke?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):je(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):je(t,e)}))}}()}},[[138,1,2]]]);
//# sourceMappingURL=main.4b74aa08.chunk.js.map