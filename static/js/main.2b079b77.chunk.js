(this["webpackJsonplabel-maker"]=this["webpackJsonplabel-maker"]||[]).push([[0],{103:function(e){e.exports=JSON.parse('{"printers":{"B_TD2130N":{"type":"B_TD2130N","name":"Brother TD2130N","labelWidth":252,"labelHeight":32,"marginTop":0,"marginBottom":0,"marginLeft":34.8,"dpmm":12},"Z_XXXXX":{"type":"Z_XXXXX","name":"Zebra XXXXX","labelWidth":252,"labelHeight":32,"marginTop":5,"marginLeft":36.8,"dpmm":12}}}')},104:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(10),l=a.n(i),o=(a(97),a(34)),s=a(35),c=a(13),d=a(38),h=a(37),m=(a(98),a(4)),p=a(151),u=a(153),g=a(138),f=a(106),b=a(152),v=a(145),E=a(59),C=a(143),y=a(144),x=a(79),k=a.n(x),w=a(80),O=a.n(w),j=a(154),T=a(160),S=a(55),N=a(12),A=a(155),W=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleNameChange=n.handleNameChange.bind(Object(c.a)(n)),n.handleNricChange=n.handleNricChange.bind(Object(c.a)(n)),n.handleBedNoChange=n.handleBedNoChange.bind(Object(c.a)(n)),n.handleCatStatusChange=n.handleCatStatusChange.bind(Object(c.a)(n)),n.handleDateChange=n.handleDateChange.bind(Object(c.a)(n)),n.handleAllergiesChange=n.handleAllergiesChange.bind(Object(c.a)(n)),n}return Object(s.a)(a,[{key:"handleNameChange",value:function(e){this.props.onChange({name:e.target.value})}},{key:"handleNricChange",value:function(e){this.props.onChange({nric:e.target.value})}},{key:"handleBedNoChange",value:function(e){this.props.onChange({bed_no:e.target.value})}},{key:"handleCatStatusChange",value:function(e){this.props.onChange({cat_status:e.target.value})}},{key:"handleDateChange",value:function(e){this.props.onChange({admission_date:e})}},{key:"handleAllergiesChange",value:function(e){this.props.onChange({allergies:e.target.value})}},{key:"render",value:function(){return r.a.createElement(g.a,{container:!0,spacing:3},r.a.createElement(g.a,{item:!0,xs:12,md:6},r.a.createElement(j.a,{id:"input-name",label:"Name",variant:"standard",fullWidth:!0,onChange:this.handleNameChange})),r.a.createElement(g.a,{item:!0,xs:12,md:6},r.a.createElement(j.a,{id:"input-nric",label:"NRIC/FIN",variant:"standard",fullWidth:!0,onChange:this.handleNricChange})),r.a.createElement(g.a,{item:!0,xs:12,md:4},r.a.createElement(j.a,{select:!0,defaultValue:"1",id:"input-cat-status",label:"Cat. Status",variant:"standard",align:"left",fullWidth:!0,onChange:this.handleCatStatusChange},r.a.createElement(T.a,{key:"1",value:"1"},"Cat 1"),r.a.createElement(T.a,{key:"2A",value:"2A"},"Cat 2A"),r.a.createElement(T.a,{key:"2A+",value:"2A+"},"Cat 2A+"),r.a.createElement(T.a,{key:"2B",value:"2B"},"Cat 2B"),r.a.createElement(T.a,{key:"3",value:"3"},"Cat 3"))),r.a.createElement(g.a,{item:!0,xs:12,md:4},r.a.createElement(j.a,{id:"input-bed-no",label:"Bed Number",variant:"standard",fullWidth:!0,onChange:this.handleBedNoChange})),r.a.createElement(g.a,{item:!0,xs:12,md:4},r.a.createElement(N.a,{utils:S.a},r.a.createElement(A.a,{fullWidth:!0,disableToolbar:!0,variant:"inline",format:"dd MMM yyyy",id:"date-picker-inline",label:"Admission Date",value:this.props.admission_date,onChange:this.handleDateChange,KeyboardButtonProps:{"aria-label":"change date"}}))),r.a.createElement(g.a,{item:!0,xs:12},r.a.createElement(j.a,{id:"input-allergies",label:"Drug Allergies",variant:"standard",fullWidth:!0,onChange:this.handleAllergiesChange})))}}]),a}(r.a.Component),P=a(76),B=a.n(P),I=new S.a,R=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){if(this.props.generate){var e=this.props.canvasRef.current.getContext("2d"),t=this.props,a=this.props.printer.dpmm*this.props.printer.marginLeft,n=this.props.printer.dpmm*(this.props.printer.labelHeight-2*this.props.printer.marginTop);e.save(),e.translate(a,0);var i=B()(0,"H");i.addData(t.nric),i.make(),e.translate(50,(n-250)/2),i.renderTo2dContext(e,10),e.restore(),e.save(),e.translate(a,0),e.font="bold 60px Arial";var l="CAT "+t.cat_status,o=e.measureText(l);e.translate(404,n/2),e.rotate(-Math.PI/2),e.translate(-o.width/2,0),e.fillText(l,0,0),e.restore(),e.save(),e.translate(a+50+250+60+44+50,(n-200)/2),e.font="bold 30px Arial",e.fillText("Name:",0,0),e.fillText("NRIC/FIN:",0,50),e.fillText("Bed:",0,100),e.fillText("Admission:",0,150),e.fillText("Drug Allergy:",0,200),e.font="bold 30px Arial",e.fillText(t.name,200,0),e.fillText(t.nric,200,50),e.fillText(t.bed_no,200,100),e.fillText(I.format(t.admission_date,"dd MMM yyyy"),200,150),e.fillText(t.allergies,200,200),e.restore()}return r.a.createElement("div",{style:{overflow:"scroll",width:"100%",float:"left",position:"relative"}},r.a.createElement("div",{style:{width:this.props.printer.dpmm*this.props.printer.labelWidth,height:this.props.printer.dpmm*this.props.printer.labelHeight,display:"flex",justifyContent:"left",alignItems:"center",border:"solid 1px black"}},r.a.createElement("canvas",{ref:this.props.canvasRef,id:"labelCanvas",width:this.props.printer.dpmm*(this.props.printer.labelWidth-this.props.printer.marginLeft),height:this.props.printer.dpmm*(this.props.printer.labelHeight-2*this.props.printer.marginTop)})))}}]),a}(r.a.Component),X=a(31),_=a(56),D=a(147),L=a(26),M=a(158),H=a(141),U=a(149),G=a(148),F=a(142),J=a(77),Z=a.n(J),K=a(78),V=a.n(K),$=a(146),q=a(150);function z(e){var t=Object(L.a)(),a=Object(D.a)(t.breakpoints.down("xs")),n=Object.entries(e.printers).map((function(e){return r.a.createElement(T.a,{key:e[1].type,value:e[1].type},e[1].name)})),i=r.a.useState(!1),l=Object(_.a)(i,2),o=l[0],s=l[1],c=r.a.useState(e.printer),d=Object(_.a)(c,2),h=d[0],m=d[1],p=r.a.useState("Unknown"!==e.printer.type),u=Object(_.a)(p,2),f=u[0],b=u[1],v=function(){m(e.printer),s(!1),e.onClose()};return r.a.createElement(M.a,Object.assign({fullScreen:a,onBackdropClick:v},e),r.a.createElement(G.a,null,"Settings"),r.a.createElement(H.a,null,r.a.createElement(U.a,null,"Select print settings to match printer at your station."),r.a.createElement(g.a,{container:!0,spacing:3},r.a.createElement(g.a,{item:!0,xs:12},r.a.createElement(j.a,{select:!0,fullWidth:!0,label:"Printer Type",value:h.type,onChange:function(t){var a=t.target.value;if("Unknown"!==a)m(e.printers[a]),b(!0);else{var n=Object(X.a)({},h);n.type=a,m(n),b(!1)}s(!0)}},r.a.createElement(T.a,{key:"Unknown",value:"Unknown"},"Unknown (Manual Config.)"),n)),r.a.createElement(g.a,{item:!0,xs:12},r.a.createElement(q.a,null)),r.a.createElement(g.a,{item:!0,xs:12},r.a.createElement(j.a,{disabled:f,fullWidth:!0,type:"number",label:"Resolution",helperText:"300 dpi = 12 dpmm",InputProps:{endAdornment:r.a.createElement($.a,{position:"end"},"dpmm")},value:h.dpmm,onChange:function(e){if(e.target.value>=0){var t=Object(X.a)({},h);t.dpmm=e.target.value,m(t),s(!0)}}})),r.a.createElement(g.a,{item:!0,xs:4}),r.a.createElement(g.a,{item:!0,xs:4},r.a.createElement(j.a,{disabled:f,fullWidth:!0,type:"number",label:"Top Margin",helperText:"Also the bottom margin",InputProps:{endAdornment:r.a.createElement($.a,{position:"end"},"mm")},value:h.marginTop,onChange:function(e){if(e.target.value>=0){var t=Object(X.a)({},h);t.marginTop=e.target.value,m(t),s(!0)}}})),r.a.createElement(g.a,{item:!0,xs:4}),r.a.createElement(g.a,{item:!0,xs:4},r.a.createElement(j.a,{disabled:f,fullWidth:!0,type:"number",label:"Left Margin",InputProps:{endAdornment:r.a.createElement($.a,{position:"end"},"mm")},value:h.marginLeft,onChange:function(e){if(e.target.value>=0){var t=Object(X.a)({},h);t.marginLeft=e.target.value,m(t),s(!0)}}})),r.a.createElement(g.a,{item:!0,xs:4},r.a.createElement("div",{align:"center",style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",border:"solid 1px black"}},r.a.createElement(E.a,null,"Label"))),r.a.createElement(g.a,{item:!0,xs:4},r.a.createElement(j.a,{disabled:f,fullWidth:!0,type:"number",label:"Label Height",InputProps:{endAdornment:r.a.createElement($.a,{position:"end"},"mm")},value:h.labelHeight,onChange:function(e){if(e.target.value>=0){var t=Object(X.a)({},h);t.labelHeight=e.target.value,m(t),s(!0)}}})),r.a.createElement(g.a,{item:!0,xs:4}),r.a.createElement(g.a,{item:!0,xs:4},r.a.createElement(j.a,{disabled:f,fullWidth:!0,type:"number",label:"Label Width",InputProps:{endAdornment:r.a.createElement($.a,{position:"end"},"mm")},value:h.labelWidth,onChange:function(e){if(e.target.value>=0){var t=Object(X.a)({},h);t.labelWidth=e.target.value,m(t),s(!0)}}})),r.a.createElement(g.a,{item:!0,xs:4}))),r.a.createElement(F.a,null,r.a.createElement(C.a,{startIcon:r.a.createElement(Z.a,null),onClick:function(){e.onSave(Object(X.a)({},h)),s(!1),e.onClose()},disabled:!o},"Save"),r.a.createElement(C.a,{startIcon:r.a.createElement(V.a,null),onClick:v},"Cancel")))}var Q=a(103),Y=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;Object(o.a)(this,a),(n=t.call(this,e)).handleFormChange=n.handleFormChange.bind(Object(c.a)(n)),n.handleGenerate=n.handleGenerate.bind(Object(c.a)(n)),n.handlePrint=n.handlePrint.bind(Object(c.a)(n)),n.handleSettingsToggle=n.handleSettingsToggle.bind(Object(c.a)(n)),n.handleSettingsChanged=n.handleSettingsChanged.bind(Object(c.a)(n)),n.canvasRef=r.a.createRef();var i=window.localStorage.getItem("printer");return console.log(Q.printers[0]),n.state={generate:!1,name:"",nric:"",bed_no:"",cat_status:"1",admission_date:Date.now(),allergies:"",printer:i?JSON.parse(i):Q.printers.B_TD2130N,settingsOpen:!1},n}return Object(s.a)(a,[{key:"handleFormChange",value:function(e){e.generate=!1,this.setState(e)}},{key:"handleGenerate",value:function(){var e=this.canvasRef.current;e.getContext("2d").clearRect(0,0,e.width,e.height),this.setState({generate:!0}),this.render()}},{key:"handlePrint",value:function(){var e=this.canvasRef.current.toDataURL("image/png");console.log(e);var t=window.open("","Print","height=500, width=500");t.document.write('<img src="'+e+'"/>'),t.document.close(),t.print()}},{key:"handleSettingsToggle",value:function(){this.setState({settingsOpen:!this.state.settingsOpen})}},{key:"handleSettingsChanged",value:function(e){window.localStorage.setItem("printer",JSON.stringify(e)),this.setState({printer:e}),console.log(e)}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.root},r.a.createElement(p.a,null),r.a.createElement(b.a,{position:"static"},r.a.createElement(v.a,null,r.a.createElement(E.a,{variant:"h6",className:e.title},"Label Maker"),r.a.createElement(C.a,{color:"inherit",startIcon:r.a.createElement(k.a,null),onClick:this.handlePrint},"Print"),r.a.createElement(y.a,{color:"inherit",onClick:this.handleSettingsToggle},r.a.createElement(O.a,null)))),r.a.createElement(u.a,{className:e.container,maxWidth:"md"},r.a.createElement(f.a,{className:e.paper},r.a.createElement(g.a,{container:!0,spacing:3},r.a.createElement(g.a,{item:!0,xs:12},r.a.createElement(E.a,{variant:"h5",align:"left"},"Personal Particulars")),r.a.createElement(g.a,{item:!0,xs:12},r.a.createElement(W,Object.assign({classes:this.props,onChange:this.handleFormChange},this.state))),r.a.createElement(g.a,{item:!0,xs:12},r.a.createElement(C.a,{variant:"contained",color:"primary",onClick:this.handleGenerate},"Generate")))),r.a.createElement(f.a,{className:e.paper},r.a.createElement(g.a,{container:!0,spacing:3},r.a.createElement(g.a,{item:!0,xs:12},r.a.createElement(E.a,{variant:"h5",align:"left"},"Preview")),r.a.createElement(g.a,{item:!0,xs:12},r.a.createElement(R,Object.assign({canvasRef:this.canvasRef},this.state)))))),r.a.createElement(z,{printer:this.state.printer,printers:Q.printers,open:this.state.settingsOpen,onClose:this.handleSettingsToggle,onSave:this.handleSettingsChanged}))}}]),a}(r.a.Component),ee=Object(m.a)((function(e){return{root:{flexGrow:1},title:{flexGrow:1},container:{padding:e.spacing(2)},paper:{margin:e.spacing(2),padding:"20px",textAlign:"center",color:e.palette.text.secondary}}}),{withTheme:!0})(Y),te=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ae(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}l.a.render(r.a.createElement(ee,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");te?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ae(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ae(t,e)}))}}()},92:function(e,t,a){e.exports=a(104)},97:function(e,t,a){},98:function(e,t,a){}},[[92,1,2]]]);
//# sourceMappingURL=main.2b079b77.chunk.js.map